<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta
      name="description"
      content="Interactive locations map with regional offices and contact information."
    />
    <title>Locations Map</title>

    <!-- Import Map for ES Modules -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.170.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.170.0/examples/jsm/"
        }
      }
    </script>

    <!-- Styles -->
    <link rel="stylesheet" href="./styles/base.css" />
    <link rel="stylesheet" href="./styles/app.css" />

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
  </head>

  <body data-state="usa_view">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
      <div class="loading-content">
        <div id="loading-logo" class="loading-logo" aria-hidden="true"></div>
        <div class="loading-spinner"></div>
        <p class="loading-text">Loading locations...</p>
      </div>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <!-- Logo placeholder with drop-in slot -->
        <div class="logo-container">
          <div class="logo-placeholder" aria-label="Company logo">
            <span id="header-logo" class="logo-text"></span>
            <span id="header-tagline" class="logo-tagline"></span>
          </div>
        </div>

        <!-- Navigation breadcrumb -->
        <nav class="breadcrumb" aria-label="Location navigation">
          <span id="state-indicator" class="breadcrumb-text">USA</span>
        </nav>

        <!-- Reset button -->
        <button id="reset-btn" class="btn btn-secondary reset-btn" hidden>
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
            <path d="M3 3v5h5"></path>
          </svg>
          <span class="reset-btn-text">Reset View</span>
        </button>

        <!-- Map mode selector -->
        <div class="mode-selector" role="group" aria-label="Map mode">
          <button class="mode-btn active" data-mode="tile" aria-pressed="true">Tile</button>
          <button class="mode-btn" data-mode="2d" aria-pressed="false">2D</button>
          <button class="mode-btn" data-mode="3d" aria-pressed="false">3D</button>
        </div>

        <!-- Tile style toggle (Tile mode only) -->
        <button
          id="tile-style-toggle"
          type="button"
          class="btn btn-secondary tile-style-toggle"
          aria-label="Switch to dark map"
          aria-pressed="false"
          title="Switch to dark map"
          hidden
        >
          <svg
            class="icon-sun"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg
            class="icon-moon"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>

        <!-- Spin toggle button (3D mode only) -->
        <button
          id="spin-toggle"
          type="button"
          class="btn btn-secondary spin-toggle"
          aria-label="Toggle globe rotation"
          aria-pressed="false"
          title="Toggle globe rotation"
          hidden
        >
          â†»
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="layout">
        <!-- Left sidebar: Region list (mobile: bottom sheet) -->
        <aside class="sidebar sidebar-left" id="region-list">
          <!-- Populated by RegionList component -->
        </aside>

        <!-- Center: Map -->
        <section class="map-section">
          <!-- Sidebar collapse/expand toggles (desktop only) -->
          <button
            id="collapse-left"
            class="sidebar-collapse-btn sidebar-collapse-left"
            aria-label="Collapse region panel"
            title="Collapse region panel"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <button
            id="collapse-right"
            class="sidebar-collapse-btn sidebar-collapse-right"
            aria-label="Collapse details panel"
            title="Collapse details panel"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
          <div
            id="map-container"
            class="map-container"
            role="application"
            aria-label="Interactive locations map"
          >
            <!-- Populated by MapSvg component -->
          </div>
        </section>

        <!-- Right sidebar: Details panel -->
        <aside class="sidebar sidebar-right" id="details-panel">
          <!-- Populated by DetailsPanel component -->
        </aside>
      </div>

      <!-- Specialty Divisions (below map on all sizes) -->
      <section class="specialty-section" id="specialty-divisions">
        <!-- Populated by SpecialtyDivisionsPanel component -->
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-contact">
          <span class="footer-label">Get Connected:</span>
          <a id="footer-phone" href="#" class="footer-phone"></a>
          <a id="footer-email" href="#" class="footer-email"></a>
        </div>
        <div class="footer-links">
          <a id="footer-claims" href="#">Claims</a>
          <a id="footer-lossruns" href="#">Loss Runs</a>
          <a id="footer-accounting" href="#">Accounting</a>
        </div>
        <span id="accounting-contact" class="footer-accounting-contact"></span>
        <div id="copyright" class="footer-copyright"></div>
      </div>
    </footer>

    <!-- App Script (ES Module) -->
    <script type="module" src="./app.js"></script>
  </body>
</html>
